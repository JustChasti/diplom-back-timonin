2023-05-18 19:08:35.361 | ERROR    | modules.decorators:wrapper:10 - name 'SECRET_KEY' is not defined
Traceback (most recent call last):

  File "d:\code\diploms\api\app.py", line 74, in <module>
    acces_token = token.generate_token()
                  │     └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D694E0>
                  └ <models.user.Token object at 0x000000000531B850>

> File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ (<models.user.Token object at 0x000000000531B850>,)
           └ <function Token.generate_token at 0x0000000004D1DF80>

  File "d:\code\diploms\api\models\user.py", line 28, in generate_token
    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)
                  │   │      └ {'id': '12313434', 'type': 'acces'}
                  │   └ <bound method PyJWT.encode of <jwt.api_jwt.PyJWT object at 0x0000000004D67850>>
                  └ <module 'jwt' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\jwt\\__init__.py'>

NameError: name 'SECRET_KEY' is not defined
2023-05-18 20:01:29.475 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-18 20:01:29.478 | WARNING  | db.db:create_host_list:58 - True
2023-05-18 20:01:29.480 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-18 20:01:29.482 | WARNING  | db.db:create_host_list:58 - True
2023-05-18 20:02:10.538 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-18 20:02:10.541 | WARNING  | db.db:create_host_list:58 - True
2023-05-18 20:02:10.543 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-18 20:02:10.545 | WARNING  | db.db:create_host_list:58 - True
2023-05-18 20:02:49.341 | ERROR    | modules.decorators:wrapper:10 - Object of type ObjectId is not JSON serializable
Traceback (most recent call last):

  File "d:\code\diploms\api\app.py", line 71, in <module>
    uvicorn.run(app, host=my_host, port=8000)
    │       │   │         └ '127.0.0.1'
    │       │   └ <fastapi.applications.FastAPI object at 0x0000000005A44890>
    │       └ <function run at 0x0000000003692CA0>
    └ <module 'uvicorn' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\uvicorn\\__init__.py'>

  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\main.py", line 578, in run
    server.run()
    │      └ <function Server.run at 0x00000000036F2B60>
    └ <uvicorn.server.Server object at 0x000000000368CB50>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x00000000036F2C00>
           │       │   └ <uvicorn.server.Server object at 0x000000000368CB50>
           │       └ <function run at 0x0000000003002C00>
           └ <module 'asyncio' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000000005A50040>
           │      └ <function Runner.run at 0x0000000003002FC0>
           └ <asyncio.runners.Runner object at 0x0000000004D23710>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py:81> ...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000000003000AE0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000000004D23710>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000000030DC9A0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000000003002840>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000000002F47EC0>
    └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3100>()>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3100>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3100>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3100>()>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 428, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A4D890>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D353D0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000000005A44890>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A4D890>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D353D0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D353D0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000004B34210>
          └ <fastapi.applications.FastAPI object at 0x0000000005A44890>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000000005CEFEC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000003D66010>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000004B34210>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEF880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005A45890>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000003D66010>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEF880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000000005A44850>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005A45890>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEF880>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000000003C445E0>
          └ APIRoute(path='/add-user', name='add_user', methods=['POST'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEF880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000000005A48C20>
          └ APIRoute(path='/add-user', name='add_user', methods=['POST'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000000005D37550>
                     └ <function get_request_handler.<locals>.app at 0x0000000005A48D60>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000000003C26980>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'a_password': 'Qwerty21', 'user': UserModel(username='qwerty', password='$2b$08$yINtjjwcwMuOCM6/tHITRO8w2cIbEWIMUfGtInhvk88T...
                 │         └ <function add_user at 0x0000000004D1D8A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000000005A469D0>

  File "d:\code\diploms\api\views\main.py", line 13, in add_user
    tokens = user.add_user()
             │    └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D6AE80>
             └ UserModel(username='qwerty', password='$2b$08$yINtjjwcwMuOCM6/tHITRO8w2cIbEWIMUfGtInhvk88TawfxIeTyi', _id=ObjectId('64665a39e...

  File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ (UserModel(username='qwerty', password='$2b$08$yINtjjwcwMuOCM6/tHITRO8w2cIbEWIMUfGtInhvk88TawfxIeTyi', _id=ObjectId('64665a39...
           └ <function UserModel.add_user at 0x0000000004D6ADE0>

  File "d:\code\diploms\api\models\user.py", line 50, in add_user
    refresh_token = Token(user.inserted_id).generate_refr_token()
                    │     │    └ <property object at 0x00000000048A7560>
                    │     └ <pymongo.results.InsertOneResult object at 0x0000000005CE3190>
                    └ <class 'models.token.Token'>

> File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ (<models.token.Token object at 0x0000000004D23BD0>,)
           └ <function Token.generate_refr_token at 0x0000000004D6AC00>

  File "d:\code\diploms\api\models\token.py", line 56, in generate_refr_token
    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)
                  │   │      │          │                     └ 'HS256'
                  │   │      │          └ '09d25e094faa6ca2556c818166b7a9563b93f7099f6f0f4caa6cf63b88e8d3e7'
                  │   │      └ {'id': ObjectId('64665a39e4ad1c39e06fcfe4'), 'exp': datetime.datetime(2023, 6, 17, 20, 2, 49, 341346), 'type': 'refresh'}
                  │   └ <bound method PyJWT.encode of <jwt.api_jwt.PyJWT object at 0x0000000004D6CBD0>>
                  └ <module 'jwt' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\jwt\\__init__.py'>

  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jwt.py", line 67, in encode
    json_payload = self._encode_payload(
                   │    └ <function PyJWT._encode_payload at 0x0000000004D69A80>
                   └ <jwt.api_jwt.PyJWT object at 0x0000000004D6CBD0>
  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jwt.py", line 94, in _encode_payload
    return json.dumps(
           │    └ <function dumps at 0x0000000001133E20>
           └ <module 'json' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\json\\__init__.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
      │          └ {'id': ObjectId('64665a39e4ad1c39e06fcfe4'), 'exp': 1687032169, 'type': 'refresh'}
      └ {}
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'id': ObjectId('64665a39e4ad1c39e06fcfe4'), 'exp': 1687032169, 'type': 'refresh'}
             │    └ <function JSONEncoder.iterencode at 0x00000000011442C0>
             └ <json.encoder.JSONEncoder object at 0x0000000005A4C850>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           │           └ {'id': ObjectId('64665a39e4ad1c39e06fcfe4'), 'exp': 1687032169, 'type': 'refresh'}
           └ <_json.Encoder object at 0x0000000005CD7040>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type ObjectId is not JSON serializable
2023-05-18 20:02:49.440 | ERROR    | modules.decorators:wrapper:10 - Invalid token type. Token must be a <class 'bytes'>
Traceback (most recent call last):

  File "d:\code\diploms\api\app.py", line 71, in <module>
    uvicorn.run(app, host=my_host, port=8000)
    │       │   │         └ '127.0.0.1'
    │       │   └ <fastapi.applications.FastAPI object at 0x0000000005A44890>
    │       └ <function run at 0x0000000003692CA0>
    └ <module 'uvicorn' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\uvicorn\\__init__.py'>

  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\main.py", line 578, in run
    server.run()
    │      └ <function Server.run at 0x00000000036F2B60>
    └ <uvicorn.server.Server object at 0x000000000368CB50>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x00000000036F2C00>
           │       │   └ <uvicorn.server.Server object at 0x000000000368CB50>
           │       └ <function run at 0x0000000003002C00>
           └ <module 'asyncio' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000000005A50040>
           │      └ <function Runner.run at 0x0000000003002FC0>
           └ <asyncio.runners.Runner object at 0x0000000004D23710>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py:81> ...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000000003000AE0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000000004D23710>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000000030DC9A0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000000003002840>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000000002F47EC0>
    └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3100>()>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3100>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3100>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3100>()>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 428, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A4D890>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D353D0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000000005A44890>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A4D890>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D353D0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D353D0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000004B34210>
          └ <fastapi.applications.FastAPI object at 0x0000000005A44890>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000000005CEFEC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000003D66010>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000004B34210>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEF880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005A45890>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000003D66010>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEF880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000000005A44850>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005A45890>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEF880>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000000003C445E0>
          └ APIRoute(path='/add-user', name='add_user', methods=['POST'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEF880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000000005A48C20>
          └ APIRoute(path='/add-user', name='add_user', methods=['POST'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000000005D37550>
                     └ <function get_request_handler.<locals>.app at 0x0000000005A48D60>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000000003C26980>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'a_password': 'Qwerty21', 'user': UserModel(username='qwerty', password='$2b$08$yINtjjwcwMuOCM6/tHITRO8w2cIbEWIMUfGtInhvk88T...
                 │         └ <function add_user at 0x0000000004D1D8A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000000005A469D0>

  File "d:\code\diploms\api\views\main.py", line 13, in add_user
    tokens = user.add_user()
             │    └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D6AE80>
             └ UserModel(username='qwerty', password='$2b$08$yINtjjwcwMuOCM6/tHITRO8w2cIbEWIMUfGtInhvk88TawfxIeTyi', _id=ObjectId('64665a39e...

  File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ (UserModel(username='qwerty', password='$2b$08$yINtjjwcwMuOCM6/tHITRO8w2cIbEWIMUfGtInhvk88TawfxIeTyi', _id=ObjectId('64665a39...
           └ <function UserModel.add_user at 0x0000000004D6ADE0>

  File "d:\code\diploms\api\models\user.py", line 51, in add_user
    access_token = generate_ac_token(refresh_token)
                   │                 └ {'message': 'error in generating token'}
                   └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D6A160>

  File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ ({'message': 'error in generating token'},)
           └ <function generate_ac_token at 0x0000000004D69800>

  File "d:\code\diploms\api\models\token.py", line 16, in generate_ac_token
    data = decode_token(token)
           │            └ {'message': 'error in generating token'}
           └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D1E160>

> File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ ({'message': 'error in generating token'},)
           └ <function decode_token at 0x0000000004D1E0C0>

  File "d:\code\diploms\api\models\token.py", line 10, in decode_token
    data = jwt.decode(token, SECRET_KEY, algorithms=ALGORITHM)
           │   │      │      │                      └ 'HS256'
           │   │      │      └ '09d25e094faa6ca2556c818166b7a9563b93f7099f6f0f4caa6cf63b88e8d3e7'
           │   │      └ {'message': 'error in generating token'}
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x0000000004D6CBD0>>
           └ <module 'jwt' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\jwt\\__init__.py'>

  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x0000000004D69B20>
              └ <jwt.api_jwt.PyJWT object at 0x0000000004D6CBD0>
  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jwt.py", line 151, in decode_complete
    decoded = api_jws.decode_complete(
              │       └ <bound method PyJWS.decode_complete of <jwt.api_jws.PyJWS object at 0x0000000004D43690>>
              └ <module 'jwt.api_jws' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\jwt\\api_jws.py'>
  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jws.py", line 198, in decode_complete
    payload, signing_input, header, signature = self._load(jwt)
                                                │    │     └ {'message': 'error in generating token'}
                                                │    └ <function PyJWS._load at 0x0000000004D691C0>
                                                └ <jwt.api_jws.PyJWS object at 0x0000000004D43690>
  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jws.py", line 254, in _load
    raise DecodeError(f"Invalid token type. Token must be a {bytes}")
          └ <class 'jwt.exceptions.DecodeError'>

jwt.exceptions.DecodeError: Invalid token type. Token must be a <class 'bytes'>
2023-05-18 20:02:49.529 | ERROR    | modules.decorators:wrapper:10 - 'type'
Traceback (most recent call last):

  File "d:\code\diploms\api\app.py", line 71, in <module>
    uvicorn.run(app, host=my_host, port=8000)
    │       │   │         └ '127.0.0.1'
    │       │   └ <fastapi.applications.FastAPI object at 0x0000000005A44890>
    │       └ <function run at 0x0000000003692CA0>
    └ <module 'uvicorn' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\uvicorn\\__init__.py'>

  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\main.py", line 578, in run
    server.run()
    │      └ <function Server.run at 0x00000000036F2B60>
    └ <uvicorn.server.Server object at 0x000000000368CB50>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x00000000036F2C00>
           │       │   └ <uvicorn.server.Server object at 0x000000000368CB50>
           │       └ <function run at 0x0000000003002C00>
           └ <module 'asyncio' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000000005A50040>
           │      └ <function Runner.run at 0x0000000003002FC0>
           └ <asyncio.runners.Runner object at 0x0000000004D23710>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py:81> ...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000000003000AE0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000000004D23710>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000000030DC9A0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000000003002840>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000000002F47EC0>
    └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3100>()>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3100>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3100>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3100>()>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 428, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A4D890>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D353D0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000000005A44890>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A4D890>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D353D0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D353D0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000004B34210>
          └ <fastapi.applications.FastAPI object at 0x0000000005A44890>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000000005CEFEC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000003D66010>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000004B34210>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEF880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005A45890>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000003D66010>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEF880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000000005A44850>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005A45890>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEF880>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000000003C445E0>
          └ APIRoute(path='/add-user', name='add_user', methods=['POST'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEF880>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D35...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000000005A48C20>
          └ APIRoute(path='/add-user', name='add_user', methods=['POST'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000000005D37550>
                     └ <function get_request_handler.<locals>.app at 0x0000000005A48D60>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000000003C26980>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'a_password': 'Qwerty21', 'user': UserModel(username='qwerty', password='$2b$08$yINtjjwcwMuOCM6/tHITRO8w2cIbEWIMUfGtInhvk88T...
                 │         └ <function add_user at 0x0000000004D1D8A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000000005A469D0>

  File "d:\code\diploms\api\views\main.py", line 13, in add_user
    tokens = user.add_user()
             │    └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D6AE80>
             └ UserModel(username='qwerty', password='$2b$08$yINtjjwcwMuOCM6/tHITRO8w2cIbEWIMUfGtInhvk88TawfxIeTyi', _id=ObjectId('64665a39e...

  File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ (UserModel(username='qwerty', password='$2b$08$yINtjjwcwMuOCM6/tHITRO8w2cIbEWIMUfGtInhvk88TawfxIeTyi', _id=ObjectId('64665a39...
           └ <function UserModel.add_user at 0x0000000004D6ADE0>

  File "d:\code\diploms\api\models\user.py", line 51, in add_user
    access_token = generate_ac_token(refresh_token)
                   │                 └ {'message': 'error in generating token'}
                   └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D6A160>

> File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ ({'message': 'error in generating token'},)
           └ <function generate_ac_token at 0x0000000004D69800>

  File "d:\code\diploms\api\models\token.py", line 18, in generate_ac_token
    if data['type'] == 'refresh' and data['exp'] > datetime.now():
       │                             │             │        └ <method 'now' of 'datetime.datetime' objects>
       │                             │             └ <class 'datetime.datetime'>
       │                             └ {'message': 'error in decoding token'}
       └ {'message': 'error in decoding token'}

KeyError: 'type'
2023-05-18 20:05:11.545 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-18 20:05:11.551 | WARNING  | db.db:create_host_list:58 - True
2023-05-18 20:05:11.554 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-18 20:05:11.557 | WARNING  | db.db:create_host_list:58 - True
2023-05-18 20:05:22.761 | ERROR    | modules.decorators:wrapper:10 - Object of type ObjectId is not JSON serializable
Traceback (most recent call last):

  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\runpy.py", line 198, in _run_module_as_main
    return _run_code(code, main_globals, None,
           │         │     └ {'__name__': '__main__', '__doc__': None, '__package__': '', '__loader__': <_frozen_importlib_external.SourceFileLoader objec...
           │         └ <code object <module> at 0x0000000000E4EEF0, file "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib...
           └ <function _run_code at 0x000000000114BC40>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\runpy.py", line 88, in _run_code
    exec(code, run_globals)
         │     └ {'__name__': '__main__', '__doc__': None, '__package__': '', '__loader__': <_frozen_importlib_external.SourceFileLoader objec...
         └ <code object <module> at 0x0000000000E4EEF0, file "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib...

  File "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib\python\debugpy\adapter/../..\debugpy\launcher/../..\debugpy\__main__.py", line 39, in <module>
    cli.main()
    │   └ <function main at 0x000000000457EC00>
    └ <module 'debugpy.server.cli' from 'c:\\Users\\Gray\\.vscode\\extensions\\ms-python.python-2023.8.0\\pythonFiles\\lib\\python\...

  File "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib\python\debugpy\adapter/../..\debugpy\launcher/../..\debugpy/..\debugpy\server\cli.py", line 430, in main
    run()
    └ <function run_file at 0x000000000457E980>

  File "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib\python\debugpy\adapter/../..\debugpy\launcher/../..\debugpy/..\debugpy\server\cli.py", line 284, in run_file
    runpy.run_path(target, run_name="__main__")
    │     │        └ 'D:\\code\\diploms\\api\\app.py'
    │     └ <function run_path at 0x0000000004385300>
    └ <module '_pydevd_bundle.pydevd_runpy' from 'c:\\Users\\Gray\\.vscode\\extensions\\ms-python.python-2023.8.0\\pythonFiles\\lib...

  File "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib\python\debugpy\_vendored\pydevd\_pydevd_bundle\pydevd_runpy.py", line 321, in run_path
    return _run_module_code(code, init_globals, run_name,
           │                │     │             └ '__main__'
           │                │     └ None
           │                └ <code object <module> at 0x0000000003FDDF00, file "D:\code\diploms\api\app.py", line 1>
           └ <function _run_module_code at 0x0000000004384F40>

  File "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib\python\debugpy\_vendored\pydevd\_pydevd_bundle\pydevd_runpy.py", line 135, in _run_module_code
    _run_code(code, mod_globals, init_globals,
    │         │     │            └ None
    │         │     └ {'__name__': '__main__', '__doc__': None, '__package__': '', '__loader__': None, '__spec__': None, '__file__': 'D:\\code\\dip...
    │         └ <code object <module> at 0x0000000003FDDF00, file "D:\code\diploms\api\app.py", line 1>
    └ <function _run_code at 0x0000000004384AE0>

  File "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib\python\debugpy\_vendored\pydevd\_pydevd_bundle\pydevd_runpy.py", line 124, in _run_code
    exec(code, run_globals)
         │     └ {'__name__': '__main__', '__doc__': None, '__package__': '', '__loader__': None, '__spec__': None, '__file__': 'D:\\code\\dip...
         └ <code object <module> at 0x0000000003FDDF00, file "D:\code\diploms\api\app.py", line 1>

  File "D:\code\diploms\api\app.py", line 71, in <module>
    uvicorn.run(app, host=my_host, port=8000)
    │       │   │         └ '127.0.0.1'
    │       │   └ <fastapi.applications.FastAPI object at 0x0000000008E1AB50>
    │       └ <function run at 0x0000000006DDB9C0>
    └ <module 'uvicorn' from 'd:\\code\\diploms\\api\\venv\\Lib\\site-packages\\uvicorn\\__init__.py'>

  File "d:\code\diploms\api\venv\Lib\site-packages\uvicorn\main.py", line 578, in run
    server.run()
    │      └ <function Server.run at 0x0000000006DDBC40>
    └ <uvicorn.server.Server object at 0x00000000044BBC50>
  File "d:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x0000000006DDBCE0>
           │       │   └ <uvicorn.server.Server object at 0x00000000044BBC50>
           │       └ <function run at 0x00000000059519E0>
           └ <module 'asyncio' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000000008E447B0>
           │      └ <function Runner.run at 0x0000000005951DA0>
           └ <asyncio.runners.Runner object at 0x0000000008E3DE90>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at d:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py:81> ...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000000000594F6A0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000000008E3DE90>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000000055CD440>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000000005951440>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000000058D8900>
    └ <Handle <TaskStepMethWrapper object at 0x0000000009154CD0>()>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000000009154CD0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000000009154CD0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000000009154CD0>()>
  File "d:\code\diploms\api\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 428, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000008E50950>
  File "d:\code\diploms\api\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C2D0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000000008E1AB50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000008E50950>
  File "d:\code\diploms\api\venv\Lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C2D0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "d:\code\diploms\api\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C2D0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000000000913E950>
          └ <fastapi.applications.FastAPI object at 0x0000000008E1AB50>
  File "d:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000000009160680>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000000000913E810>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000000000913E950>
  File "d:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000009160720>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000000000913E790>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000000000913E810>
  File "d:\code\diploms\api\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000009160720>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000000008E1AB10>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000000000913E790>
  File "d:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000009160720>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000000078E3D80>
          └ APIRoute(path='/add-user', name='add_user', methods=['POST'])
  File "d:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000009160720>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000000008E30220>
          └ APIRoute(path='/add-user', name='add_user', methods=['POST'])
  File "d:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000000009149690>
                     └ <function get_request_handler.<locals>.app at 0x0000000008E302C0>
  File "d:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000000007910EA0>
  File "d:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'a_password': 'Qwerty21', 'user': UserModel(username='qwerty1', password='$2b$08$yINtjjwcwMuOCM6/tHITRO3nQ0y8a2Dhho8JgsmVTte...
                 │         └ <function add_user at 0x00000000082325C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000000008E29350>

  File "D:\code\diploms\api\views\main.py", line 13, in add_user
    tokens = user.add_user()
             │    └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x00000000083040E0>
             └ UserModel(username='qwerty1', password='$2b$08$yINtjjwcwMuOCM6/tHITRO3nQ0y8a2Dhho8JgsmVTteeIoubCjJuS', _id=ObjectId('64665ad2...

  File "D:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ (UserModel(username='qwerty1', password='$2b$08$yINtjjwcwMuOCM6/tHITRO3nQ0y8a2Dhho8JgsmVTteeIoubCjJuS', _id=ObjectId('64665ad...
           └ <function UserModel.add_user at 0x0000000008304040>

  File "D:\code\diploms\api\models\user.py", line 50, in add_user
    refresh_token = Token(user.inserted_id).generate_refr_token()
                    │     │    └ <property object at 0x0000000007D674C0>
                    │     └ <pymongo.results.InsertOneResult object at 0x0000000009154670>
                    └ <class 'models.token.Token'>

> File "D:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ (<models.token.Token object at 0x00000000082F7090>,)
           └ <function Token.generate_refr_token at 0x00000000082EFCE0>

  File "D:\code\diploms\api\models\token.py", line 46, in generate_refr_token
    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)
                  │   │      │          │                     └ 'HS256'
                  │   │      │          └ '09d25e094faa6ca2556c818166b7a9563b93f7099f6f0f4caa6cf63b88e8d3e7'
                  │   │      └ {'id': ObjectId('64665ad287cec90f5263e432'), 'exp': datetime.datetime(2023, 6, 17, 20, 5, 22, 760613), 'type': 'refresh'}
                  │   └ <bound method PyJWT.encode of <jwt.api_jwt.PyJWT object at 0x00000000082F59D0>>
                  └ <module 'jwt' from 'd:\\code\\diploms\\api\\venv\\Lib\\site-packages\\jwt\\__init__.py'>

  File "d:\code\diploms\api\venv\Lib\site-packages\jwt\api_jwt.py", line 67, in encode
    json_payload = self._encode_payload(
                   │    └ <function PyJWT._encode_payload at 0x00000000082EEB60>
                   └ <jwt.api_jwt.PyJWT object at 0x00000000082F59D0>
  File "d:\code\diploms\api\venv\Lib\site-packages\jwt\api_jwt.py", line 94, in _encode_payload
    return json.dumps(
           │    └ <function dumps at 0x00000000015919E0>
           └ <module 'json' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\json\\__init__.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
      │          └ {'id': ObjectId('64665ad287cec90f5263e432'), 'exp': 1687032322, 'type': 'refresh'}
      └ {}
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'id': ObjectId('64665ad287cec90f5263e432'), 'exp': 1687032322, 'type': 'refresh'}
             │    └ <function JSONEncoder.iterencode at 0x0000000001591E40>
             └ <json.encoder.JSONEncoder object at 0x000000000916FD50>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           │           └ {'id': ObjectId('64665ad287cec90f5263e432'), 'exp': 1687032322, 'type': 'refresh'}
           └ <_json.Encoder object at 0x0000000009170280>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '

TypeError: Object of type ObjectId is not JSON serializable
2023-05-18 20:05:22.963 | ERROR    | modules.decorators:wrapper:10 - Invalid token type. Token must be a <class 'bytes'>
Traceback (most recent call last):

  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\runpy.py", line 198, in _run_module_as_main
    return _run_code(code, main_globals, None,
           │         │     └ {'__name__': '__main__', '__doc__': None, '__package__': '', '__loader__': <_frozen_importlib_external.SourceFileLoader objec...
           │         └ <code object <module> at 0x0000000000E4EEF0, file "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib...
           └ <function _run_code at 0x000000000114BC40>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\runpy.py", line 88, in _run_code
    exec(code, run_globals)
         │     └ {'__name__': '__main__', '__doc__': None, '__package__': '', '__loader__': <_frozen_importlib_external.SourceFileLoader objec...
         └ <code object <module> at 0x0000000000E4EEF0, file "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib...

  File "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib\python\debugpy\adapter/../..\debugpy\launcher/../..\debugpy\__main__.py", line 39, in <module>
    cli.main()
    │   └ <function main at 0x000000000457EC00>
    └ <module 'debugpy.server.cli' from 'c:\\Users\\Gray\\.vscode\\extensions\\ms-python.python-2023.8.0\\pythonFiles\\lib\\python\...

  File "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib\python\debugpy\adapter/../..\debugpy\launcher/../..\debugpy/..\debugpy\server\cli.py", line 430, in main
    run()
    └ <function run_file at 0x000000000457E980>

  File "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib\python\debugpy\adapter/../..\debugpy\launcher/../..\debugpy/..\debugpy\server\cli.py", line 284, in run_file
    runpy.run_path(target, run_name="__main__")
    │     │        └ 'D:\\code\\diploms\\api\\app.py'
    │     └ <function run_path at 0x0000000004385300>
    └ <module '_pydevd_bundle.pydevd_runpy' from 'c:\\Users\\Gray\\.vscode\\extensions\\ms-python.python-2023.8.0\\pythonFiles\\lib...

  File "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib\python\debugpy\_vendored\pydevd\_pydevd_bundle\pydevd_runpy.py", line 321, in run_path
    return _run_module_code(code, init_globals, run_name,
           │                │     │             └ '__main__'
           │                │     └ None
           │                └ <code object <module> at 0x0000000003FDDF00, file "D:\code\diploms\api\app.py", line 1>
           └ <function _run_module_code at 0x0000000004384F40>

  File "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib\python\debugpy\_vendored\pydevd\_pydevd_bundle\pydevd_runpy.py", line 135, in _run_module_code
    _run_code(code, mod_globals, init_globals,
    │         │     │            └ None
    │         │     └ {'__name__': '__main__', '__doc__': None, '__package__': '', '__loader__': None, '__spec__': None, '__file__': 'D:\\code\\dip...
    │         └ <code object <module> at 0x0000000003FDDF00, file "D:\code\diploms\api\app.py", line 1>
    └ <function _run_code at 0x0000000004384AE0>

  File "c:\Users\Gray\.vscode\extensions\ms-python.python-2023.8.0\pythonFiles\lib\python\debugpy\_vendored\pydevd\_pydevd_bundle\pydevd_runpy.py", line 124, in _run_code
    exec(code, run_globals)
         │     └ {'__name__': '__main__', '__doc__': None, '__package__': '', '__loader__': None, '__spec__': None, '__file__': 'D:\\code\\dip...
         └ <code object <module> at 0x0000000003FDDF00, file "D:\code\diploms\api\app.py", line 1>

  File "D:\code\diploms\api\app.py", line 71, in <module>
    uvicorn.run(app, host=my_host, port=8000)
    │       │   │         └ '127.0.0.1'
    │       │   └ <fastapi.applications.FastAPI object at 0x0000000008E1AB50>
    │       └ <function run at 0x0000000006DDB9C0>
    └ <module 'uvicorn' from 'd:\\code\\diploms\\api\\venv\\Lib\\site-packages\\uvicorn\\__init__.py'>

  File "d:\code\diploms\api\venv\Lib\site-packages\uvicorn\main.py", line 578, in run
    server.run()
    │      └ <function Server.run at 0x0000000006DDBC40>
    └ <uvicorn.server.Server object at 0x00000000044BBC50>
  File "d:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x0000000006DDBCE0>
           │       │   └ <uvicorn.server.Server object at 0x00000000044BBC50>
           │       └ <function run at 0x00000000059519E0>
           └ <module 'asyncio' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000000008E447B0>
           │      └ <function Runner.run at 0x0000000005951DA0>
           └ <asyncio.runners.Runner object at 0x0000000008E3DE90>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at d:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py:81> ...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000000000594F6A0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000000008E3DE90>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000000055CD440>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000000005951440>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000000058D8900>
    └ <Handle <TaskStepMethWrapper object at 0x0000000009154CD0>()>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000000009154CD0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000000009154CD0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000000009154CD0>()>
  File "d:\code\diploms\api\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 428, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000008E50950>
  File "d:\code\diploms\api\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C2D0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000000008E1AB50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000008E50950>
  File "d:\code\diploms\api\venv\Lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C2D0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "d:\code\diploms\api\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C2D0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000000000913E950>
          └ <fastapi.applications.FastAPI object at 0x0000000008E1AB50>
  File "d:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000000009160680>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000000000913E810>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000000000913E950>
  File "d:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000009160720>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000000000913E790>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000000000913E810>
  File "d:\code\diploms\api\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000009160720>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000000008E1AB10>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000000000913E790>
  File "d:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000009160720>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000000078E3D80>
          └ APIRoute(path='/add-user', name='add_user', methods=['POST'])
  File "d:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000009160720>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000916C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000000008E30220>
          └ APIRoute(path='/add-user', name='add_user', methods=['POST'])
  File "d:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000000009149690>
                     └ <function get_request_handler.<locals>.app at 0x0000000008E302C0>
  File "d:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000000007910EA0>
  File "d:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'a_password': 'Qwerty21', 'user': UserModel(username='qwerty1', password='$2b$08$yINtjjwcwMuOCM6/tHITRO3nQ0y8a2Dhho8JgsmVTte...
                 │         └ <function add_user at 0x00000000082325C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000000008E29350>

  File "D:\code\diploms\api\views\main.py", line 13, in add_user
    tokens = user.add_user()
             │    └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x00000000083040E0>
             └ UserModel(username='qwerty1', password='$2b$08$yINtjjwcwMuOCM6/tHITRO3nQ0y8a2Dhho8JgsmVTteeIoubCjJuS', _id=ObjectId('64665ad2...

  File "D:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ (UserModel(username='qwerty1', password='$2b$08$yINtjjwcwMuOCM6/tHITRO3nQ0y8a2Dhho8JgsmVTteeIoubCjJuS', _id=ObjectId('64665ad...
           └ <function UserModel.add_user at 0x0000000008304040>

  File "D:\code\diploms\api\models\user.py", line 51, in add_user
    access_token = generate_ac_token(refresh_token)
                   │                 └ {'message': 'error in generating token'}
                   └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x00000000082EE8E0>

  File "D:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ ({'message': 'error in generating token'},)
           └ <function generate_ac_token at 0x0000000008232F20>

  File "D:\code\diploms\api\models\token.py", line 16, in generate_ac_token
    data = decode_token(token)
           │            └ {'message': 'error in generating token'}
           └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000008232DE0>

> File "D:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ ({'message': 'error in generating token'},)
           └ <function decode_token at 0x0000000008232D40>

  File "D:\code\diploms\api\models\token.py", line 10, in decode_token
    data = jwt.decode(token, SECRET_KEY, algorithms=ALGORITHM)
           │   │      │      │                      └ 'HS256'
           │   │      │      └ '09d25e094faa6ca2556c818166b7a9563b93f7099f6f0f4caa6cf63b88e8d3e7'
           │   │      └ {'message': 'error in generating token'}
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x00000000082F59D0>>
           └ <module 'jwt' from 'd:\\code\\diploms\\api\\venv\\Lib\\site-packages\\jwt\\__init__.py'>

  File "d:\code\diploms\api\venv\Lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x00000000082EEC00>
              └ <jwt.api_jwt.PyJWT object at 0x00000000082F59D0>
  File "d:\code\diploms\api\venv\Lib\site-packages\jwt\api_jwt.py", line 151, in decode_complete
    decoded = api_jws.decode_complete(
              │       └ <bound method PyJWS.decode_complete of <jwt.api_jws.PyJWS object at 0x00000000082F4050>>
              └ <module 'jwt.api_jws' from 'd:\\code\\diploms\\api\\venv\\Lib\\site-packages\\jwt\\api_jws.py'>
  File "d:\code\diploms\api\venv\Lib\site-packages\jwt\api_jws.py", line 198, in decode_complete
    payload, signing_input, header, signature = self._load(jwt)
                                                │    │     └ {'message': 'error in generating token'}
                                                │    └ <function PyJWS._load at 0x00000000082EE2A0>
                                                └ <jwt.api_jws.PyJWS object at 0x00000000082F4050>
  File "d:\code\diploms\api\venv\Lib\site-packages\jwt\api_jws.py", line 254, in _load
    raise DecodeError(f"Invalid token type. Token must be a {bytes}")
          └ <class 'jwt.exceptions.DecodeError'>

jwt.exceptions.DecodeError: Invalid token type. Token must be a <class 'bytes'>
2023-05-18 20:07:45.577 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-18 20:07:45.579 | WARNING  | db.db:create_host_list:58 - True
2023-05-18 20:07:45.582 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-18 20:07:45.584 | WARNING  | db.db:create_host_list:58 - True
2023-05-18 20:07:52.096 | ERROR    | modules.decorators:wrapper:10 - '>' not supported between instances of 'int' and 'datetime.datetime'
Traceback (most recent call last):

  File "d:\code\diploms\api\app.py", line 71, in <module>
    uvicorn.run(app, host=my_host, port=8000)
    │       │   │         └ '127.0.0.1'
    │       │   └ <fastapi.applications.FastAPI object at 0x0000000005A44710>
    │       └ <function run at 0x00000000036E2CA0>
    └ <module 'uvicorn' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\uvicorn\\__init__.py'>

  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\main.py", line 578, in run
    server.run()
    │      └ <function Server.run at 0x0000000003742B60>
    └ <uvicorn.server.Server object at 0x00000000036DCB50>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x0000000003742C00>
           │       │   └ <uvicorn.server.Server object at 0x00000000036DCB50>
           │       └ <function run at 0x0000000003052C00>
           └ <module 'asyncio' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000000005A50040>
           │      └ <function Runner.run at 0x0000000003052FC0>
           └ <asyncio.runners.Runner object at 0x0000000005A4CCD0>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py:81> ...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000000003050AE0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000000005A4CCD0>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000000000312C9A0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000000003052840>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000000002F97EC0>
    └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3430>()>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3430>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3430>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000000005CE3430>()>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 428, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A4DA50>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D0CF90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D0C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000000005A44710>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A4DA50>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D0CF90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D0C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D0CF90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D0C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000005D01B90>
          └ <fastapi.applications.FastAPI object at 0x0000000005A44710>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000000005CEF740>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D0C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000005D01690>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000005D01B90>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEFB00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D0C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005D013D0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000005D01690>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEFB00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D0C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000000000362BD90>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005D013D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEFB00>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D0C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000000003C445E0>
          └ APIRoute(path='/add-user', name='add_user', methods=['POST'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005CEFB00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D0C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000000005A48AE0>
          └ APIRoute(path='/add-user', name='add_user', methods=['POST'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000000005D11190>
                     └ <function get_request_handler.<locals>.app at 0x0000000005A48C20>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000000003C26980>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'a_password': 'Qwerty21', 'user': UserModel(username='qwerty2', password='$2b$08$yINtjjwcwMuOCM6/tHITROHptl1hT/zeuzVSlueWuYS...
                 │         └ <function add_user at 0x0000000004D1D8A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000000005A46950>

  File "d:\code\diploms\api\views\main.py", line 13, in add_user
    tokens = user.add_user()
             │    └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D6ED40>
             └ UserModel(username='qwerty2', password='$2b$08$yINtjjwcwMuOCM6/tHITROHptl1hT/zeuzVSlueWuYSV3lpgo7rRu', _id=ObjectId('64665b68...

  File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ (UserModel(username='qwerty2', password='$2b$08$yINtjjwcwMuOCM6/tHITROHptl1hT/zeuzVSlueWuYSV3lpgo7rRu', _id=ObjectId('64665b6...
           └ <function UserModel.add_user at 0x0000000004D6ECA0>

  File "d:\code\diploms\api\models\user.py", line 51, in add_user
    access_token = generate_ac_token(refresh_token)
                   │                 └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YjY4NmZkNjAwOGEwNmFmMjRjOCIsImV4cCI6MTY4NzAzMjQ3MiwidHlwZSI6InJlZnJlc2g...
                   └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D6E0C0>

> File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YjY4NmZkNjAwOGEwNmFmMjRjOCIsImV4cCI6MTY4NzAzMjQ3MiwidHlwZSI6InJlZnJlc2...
           └ <function generate_ac_token at 0x0000000004D6D760>

  File "d:\code\diploms\api\models\token.py", line 18, in generate_ac_token
    if data['type'] == 'refresh' and data['exp'] > datetime.now():
       │                             │             │        └ <method 'now' of 'datetime.datetime' objects>
       │                             │             └ <class 'datetime.datetime'>
       │                             └ {'id': '64665b686fd6008a06af24c8', 'exp': 1687032472, 'type': 'refresh'}
       └ {'id': '64665b686fd6008a06af24c8', 'exp': 1687032472, 'type': 'refresh'}

TypeError: '>' not supported between instances of 'int' and 'datetime.datetime'
2023-05-18 20:35:23.405 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-18 20:35:23.410 | WARNING  | db.db:create_host_list:58 - True
2023-05-18 20:35:23.413 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-18 20:35:23.416 | WARNING  | db.db:create_host_list:58 - True
2023-05-18 20:42:01.298 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-18 20:42:01.300 | WARNING  | db.db:create_host_list:58 - True
2023-05-18 20:42:01.303 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-18 20:42:01.305 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 18:30:44.733 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-20 18:30:44.736 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 18:30:44.738 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-20 18:30:44.739 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 20:26:51.355 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-20 20:26:51.357 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 20:26:51.360 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-20 20:26:51.362 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 20:27:54.093 | ERROR    | modules.decorators:wrapper:10 - Signature verification failed
Traceback (most recent call last):

  File "d:\code\diploms\api\app.py", line 71, in <module>
    uvicorn.run(app, host=my_host, port=8000)
    │       │   │         └ '127.0.0.1'
    │       │   └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
    │       └ <function run at 0x0000000003632CA0>
    └ <module 'uvicorn' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\uvicorn\\__init__.py'>

  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\main.py", line 578, in run
    server.run()
    │      └ <function Server.run at 0x0000000003692B60>
    └ <uvicorn.server.Server object at 0x0000000004D6E8D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x0000000003692C00>
           │       │   └ <uvicorn.server.Server object at 0x0000000004D6E8D0>
           │       └ <function run at 0x0000000002FA2C00>
           └ <module 'asyncio' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000000005A506A0>
           │      └ <function Runner.run at 0x0000000002FA2FC0>
           └ <asyncio.runners.Runner object at 0x000000000381E410>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py:81> ...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000000002FA0AE0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000000000381E410>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000000000307C9A0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000000002FA2840>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000000002EE7EC0>
    └ <Handle <TaskStepMethWrapper object at 0x0000000005D1A860>()>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000000005D1A860>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000000005D1A860>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000000005D1A860>()>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 428, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A54950>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47B90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A54950>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47B90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47B90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000005D0CD50>
          └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000000005D08D60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000005D0C8D0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000005D0CD50>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08EA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005D0C810>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000005D0C8D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08EA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000000004D6E810>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005D0C810>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08EA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000000003C445E0>
          └ APIRoute(path='/refresh', name='login', methods=['GET'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08EA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000000005A49E40>
          └ APIRoute(path='/refresh', name='login', methods=['GET'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000000005D47690>
                     └ <function get_request_handler.<locals>.app at 0x0000000005A49DA0>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000000003C26980>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwid...
                 │         └ <function login at 0x0000000004D73240>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000000005A4D550>

  File "d:\code\diploms\api\views\main.py", line 56, in login
    access_token = generate_ac_token(refresh_token)
                   │                 └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2g...
                   └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D71F80>

  File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2...
           └ <function generate_ac_token at 0x0000000004D71620>

  File "d:\code\diploms\api\models\token.py", line 16, in generate_ac_token
    data = decode_token(token)
           │            └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2g...
           └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D1DF80>

> File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2...
           └ <function decode_token at 0x0000000004D1DEE0>

  File "d:\code\diploms\api\models\token.py", line 10, in decode_token
    data = jwt.decode(token, SECRET_KEY, algorithms=ALGORITHM)
           │   │      │      │                      └ 'HS256'
           │   │      │      └ '09d25e094faa6ca2556c818166b7a9563b93f7099f6f0f4caa6cf63b88e8d3e7'
           │   │      └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2g...
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x0000000004D6D250>>
           └ <module 'jwt' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\jwt\\__init__.py'>

  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x0000000004D71940>
              └ <jwt.api_jwt.PyJWT object at 0x0000000004D6D250>
  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jwt.py", line 151, in decode_complete
    decoded = api_jws.decode_complete(
              │       └ <bound method PyJWS.decode_complete of <jwt.api_jws.PyJWS object at 0x0000000004D507D0>>
              └ <module 'jwt.api_jws' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\jwt\\api_jws.py'>
  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jws.py", line 209, in decode_complete
    self._verify_signature(signing_input, header, signature, key, algorithms)
    │    │                 │              │       │          │    └ 'HS256'
    │    │                 │              │       │          └ '09d25e094faa6ca2556c818166b7a9563b93f7099f6f0f4caa6cf63b88e8d3e7'
    │    │                 │              │       └ b'\t-\xd0\xfcx\xff\xfdi\xac\xa6.,\n}\xc7\xbe\xb6\x0c)\xa6\xcb\xb4\xefR\\_S\xa7\x97\xc6'
    │    │                 │              └ {'alg': 'HS256', 'typ': 'JWT'}
    │    │                 └ b'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2...
    │    └ <function PyJWS._verify_signature at 0x0000000004D71080>
    └ <jwt.api_jws.PyJWS object at 0x0000000004D507D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jws.py", line 310, in _verify_signature
    raise InvalidSignatureError("Signature verification failed")
          └ <class 'jwt.exceptions.InvalidSignatureError'>

jwt.exceptions.InvalidSignatureError: Signature verification failed
2023-05-20 20:27:54.228 | ERROR    | modules.decorators:wrapper:10 - 'type'
Traceback (most recent call last):

  File "d:\code\diploms\api\app.py", line 71, in <module>
    uvicorn.run(app, host=my_host, port=8000)
    │       │   │         └ '127.0.0.1'
    │       │   └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
    │       └ <function run at 0x0000000003632CA0>
    └ <module 'uvicorn' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\uvicorn\\__init__.py'>

  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\main.py", line 578, in run
    server.run()
    │      └ <function Server.run at 0x0000000003692B60>
    └ <uvicorn.server.Server object at 0x0000000004D6E8D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x0000000003692C00>
           │       │   └ <uvicorn.server.Server object at 0x0000000004D6E8D0>
           │       └ <function run at 0x0000000002FA2C00>
           └ <module 'asyncio' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000000005A506A0>
           │      └ <function Runner.run at 0x0000000002FA2FC0>
           └ <asyncio.runners.Runner object at 0x000000000381E410>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py:81> ...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000000002FA0AE0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000000000381E410>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000000000307C9A0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000000002FA2840>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000000002EE7EC0>
    └ <Handle <TaskStepMethWrapper object at 0x0000000005D1A860>()>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000000005D1A860>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000000005D1A860>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000000005D1A860>()>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 428, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A54950>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47B90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A54950>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47B90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47B90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000005D0CD50>
          └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000000005D08D60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000005D0C8D0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000005D0CD50>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08EA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005D0C810>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000005D0C8D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08EA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000000004D6E810>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005D0C810>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08EA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000000003C445E0>
          └ APIRoute(path='/refresh', name='login', methods=['GET'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08EA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000000005A49E40>
          └ APIRoute(path='/refresh', name='login', methods=['GET'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000000005D47690>
                     └ <function get_request_handler.<locals>.app at 0x0000000005A49DA0>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000000003C26980>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwid...
                 │         └ <function login at 0x0000000004D73240>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000000005A4D550>

  File "d:\code\diploms\api\views\main.py", line 56, in login
    access_token = generate_ac_token(refresh_token)
                   │                 └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2g...
                   └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D71F80>

> File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2...
           └ <function generate_ac_token at 0x0000000004D71620>

  File "d:\code\diploms\api\models\token.py", line 18, in generate_ac_token
    if data['type'] == 'refresh' and datetime.fromtimestamp(data['exp']) > datetime.now():
       │                             │        │             │              │        └ <method 'now' of 'datetime.datetime' objects>
       │                             │        │             │              └ <class 'datetime.datetime'>
       │                             │        │             └ {'message': 'error in decoding token'}
       │                             │        └ <method 'fromtimestamp' of 'datetime.datetime' objects>
       │                             └ <class 'datetime.datetime'>
       └ {'message': 'error in decoding token'}

KeyError: 'type'
2023-05-20 20:28:13.212 | ERROR    | modules.decorators:wrapper:10 - Invalid crypto padding
Traceback (most recent call last):

  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jws.py", line 281, in _load
    signature = base64url_decode(crypto_segment)
                │                └ b'CS3Q_Hj__Wmspi4sCn3HvrYMKabLtO9SXF9Tp5fGVac"'
                └ <function base64url_decode at 0x0000000004D1ECA0>
  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\utils.py", line 33, in base64url_decode
    return base64.urlsafe_b64decode(input_bytes)
           │      │                 └ b'CS3Q_Hj__Wmspi4sCn3HvrYMKabLtO9SXF9Tp5fGVac"'
           │      └ <function urlsafe_b64decode at 0x00000000016A04A0>
           └ <module 'base64' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\base64.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\base64.py", line 134, in urlsafe_b64decode
    return b64decode(s)
           │         └ b'CS3Q/Hj//Wmspi4sCn3HvrYMKabLtO9SXF9Tp5fGVac"'
           └ <function b64decode at 0x00000000016A0220>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\base64.py", line 88, in b64decode
    return binascii.a2b_base64(s, strict_mode=validate)
           │        │          │              └ False
           │        │          └ b'CS3Q/Hj//Wmspi4sCn3HvrYMKabLtO9SXF9Tp5fGVac"'
           │        └ <built-in function a2b_base64>
           └ <module 'binascii' (built-in)>

binascii.Error: Incorrect padding


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "d:\code\diploms\api\app.py", line 71, in <module>
    uvicorn.run(app, host=my_host, port=8000)
    │       │   │         └ '127.0.0.1'
    │       │   └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
    │       └ <function run at 0x0000000003632CA0>
    └ <module 'uvicorn' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\uvicorn\\__init__.py'>

  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\main.py", line 578, in run
    server.run()
    │      └ <function Server.run at 0x0000000003692B60>
    └ <uvicorn.server.Server object at 0x0000000004D6E8D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x0000000003692C00>
           │       │   └ <uvicorn.server.Server object at 0x0000000004D6E8D0>
           │       └ <function run at 0x0000000002FA2C00>
           └ <module 'asyncio' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000000005A506A0>
           │      └ <function Runner.run at 0x0000000002FA2FC0>
           └ <asyncio.runners.Runner object at 0x000000000381E410>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py:81> ...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000000002FA0AE0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000000000381E410>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000000000307C9A0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000000002FA2840>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000000002EE7EC0>
    └ <Handle <TaskStepMethWrapper object at 0x0000000000947D00>()>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000000000947D00>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000000000947D00>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000000000947D00>()>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 428, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A54950>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093CF90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A54950>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093CF90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093CF90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000005D0CD50>
          └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000000005D08EA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000005D0C8D0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000005D0CD50>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005D0C810>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000005D0C8D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000000004D6E810>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005D0C810>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000000003C445E0>
          └ APIRoute(path='/refresh', name='login', methods=['GET'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000000005A49E40>
          └ APIRoute(path='/refresh', name='login', methods=['GET'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000000000093C790>
                     └ <function get_request_handler.<locals>.app at 0x0000000005A49DA0>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000000003C26980>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwid...
                 │         └ <function login at 0x0000000004D73240>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000000005A4D550>

  File "d:\code\diploms\api\views\main.py", line 56, in login
    access_token = generate_ac_token(refresh_token)
                   │                 └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2g...
                   └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D71F80>

  File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2...
           └ <function generate_ac_token at 0x0000000004D71620>

  File "d:\code\diploms\api\models\token.py", line 16, in generate_ac_token
    data = decode_token(token)
           │            └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2g...
           └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D1DF80>

> File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2...
           └ <function decode_token at 0x0000000004D1DEE0>

  File "d:\code\diploms\api\models\token.py", line 10, in decode_token
    data = jwt.decode(token, SECRET_KEY, algorithms=ALGORITHM)
           │   │      │      │                      └ 'HS256'
           │   │      │      └ '09d25e094faa6ca2556c818166b7a9563b93f7099f6f0f4caa6cf63b88e8d3e7'
           │   │      └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2g...
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x0000000004D6D250>>
           └ <module 'jwt' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\jwt\\__init__.py'>

  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x0000000004D71940>
              └ <jwt.api_jwt.PyJWT object at 0x0000000004D6D250>
  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jwt.py", line 151, in decode_complete
    decoded = api_jws.decode_complete(
              │       └ <bound method PyJWS.decode_complete of <jwt.api_jws.PyJWS object at 0x0000000004D507D0>>
              └ <module 'jwt.api_jws' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\jwt\\api_jws.py'>
  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jws.py", line 198, in decode_complete
    payload, signing_input, header, signature = self._load(jwt)
                                                │    │     └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2g...
                                                │    └ <function PyJWS._load at 0x0000000004D70FE0>
                                                └ <jwt.api_jws.PyJWS object at 0x0000000004D507D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jws.py", line 283, in _load
    raise DecodeError("Invalid crypto padding") from err
          └ <class 'jwt.exceptions.DecodeError'>

jwt.exceptions.DecodeError: Invalid crypto padding
2023-05-20 20:28:13.319 | ERROR    | modules.decorators:wrapper:10 - 'type'
Traceback (most recent call last):

  File "d:\code\diploms\api\app.py", line 71, in <module>
    uvicorn.run(app, host=my_host, port=8000)
    │       │   │         └ '127.0.0.1'
    │       │   └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
    │       └ <function run at 0x0000000003632CA0>
    └ <module 'uvicorn' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\uvicorn\\__init__.py'>

  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\main.py", line 578, in run
    server.run()
    │      └ <function Server.run at 0x0000000003692B60>
    └ <uvicorn.server.Server object at 0x0000000004D6E8D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x0000000003692C00>
           │       │   └ <uvicorn.server.Server object at 0x0000000004D6E8D0>
           │       └ <function run at 0x0000000002FA2C00>
           └ <module 'asyncio' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000000005A506A0>
           │      └ <function Runner.run at 0x0000000002FA2FC0>
           └ <asyncio.runners.Runner object at 0x000000000381E410>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py:81> ...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000000002FA0AE0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000000000381E410>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000000000307C9A0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000000002FA2840>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000000002EE7EC0>
    └ <Handle <TaskStepMethWrapper object at 0x0000000000947D00>()>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000000000947D00>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000000000947D00>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000000000947D00>()>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 428, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A54950>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093CF90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A54950>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093CF90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093CF90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000005D0CD50>
          └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000000005D08EA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000005D0C8D0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000005D0CD50>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005D0C810>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000005D0C8D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000000004D6E810>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005D0C810>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000000003C445E0>
          └ APIRoute(path='/refresh', name='login', methods=['GET'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000000000093C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000000005A49E40>
          └ APIRoute(path='/refresh', name='login', methods=['GET'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000000000093C790>
                     └ <function get_request_handler.<locals>.app at 0x0000000005A49DA0>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000000003C26980>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwid...
                 │         └ <function login at 0x0000000004D73240>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000000005A4D550>

  File "d:\code\diploms\api\views\main.py", line 56, in login
    access_token = generate_ac_token(refresh_token)
                   │                 └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2g...
                   └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D71F80>

> File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2...
           └ <function generate_ac_token at 0x0000000004D71620>

  File "d:\code\diploms\api\models\token.py", line 18, in generate_ac_token
    if data['type'] == 'refresh' and datetime.fromtimestamp(data['exp']) > datetime.now():
       │                             │        │             │              │        └ <method 'now' of 'datetime.datetime' objects>
       │                             │        │             │              └ <class 'datetime.datetime'>
       │                             │        │             └ {'message': 'error in decoding token'}
       │                             │        └ <method 'fromtimestamp' of 'datetime.datetime' objects>
       │                             └ <class 'datetime.datetime'>
       └ {'message': 'error in decoding token'}

KeyError: 'type'
2023-05-20 20:28:51.126 | ERROR    | modules.decorators:wrapper:10 - Invalid header string: Expecting ',' delimiter: line 1 column 27 (char 26)
Traceback (most recent call last):

  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jws.py", line 268, in _load
    header = json.loads(header_data)
             │    │     └ b'{"alg":"HS256","typ":"JWT"'
             │    └ <function loads at 0x00000000010E44A0>
             └ <module 'json' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\json\\__init__.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           │                │      └ '{"alg":"HS256","typ":"JWT"'
           │                └ <function JSONDecoder.decode at 0x00000000010D3CE0>
           └ <json.decoder.JSONDecoder object at 0x000000000108E1D0>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               │    │          │      │  └ '{"alg":"HS256","typ":"JWT"'
               │    │          │      └ <built-in method match of re.Pattern object at 0x00000000010DC040>
               │    │          └ '{"alg":"HS256","typ":"JWT"'
               │    └ <function JSONDecoder.raw_decode at 0x00000000010D3D80>
               └ <json.decoder.JSONDecoder object at 0x000000000108E1D0>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
               │    │         │  └ 0
               │    │         └ '{"alg":"HS256","typ":"JWT"'
               │    └ <_json.Scanner object at 0x00000000010D4520>
               └ <json.decoder.JSONDecoder object at 0x000000000108E1D0>

json.decoder.JSONDecodeError: Expecting ',' delimiter: line 1 column 27 (char 26)


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "d:\code\diploms\api\app.py", line 71, in <module>
    uvicorn.run(app, host=my_host, port=8000)
    │       │   │         └ '127.0.0.1'
    │       │   └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
    │       └ <function run at 0x0000000003632CA0>
    └ <module 'uvicorn' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\uvicorn\\__init__.py'>

  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\main.py", line 578, in run
    server.run()
    │      └ <function Server.run at 0x0000000003692B60>
    └ <uvicorn.server.Server object at 0x0000000004D6E8D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x0000000003692C00>
           │       │   └ <uvicorn.server.Server object at 0x0000000004D6E8D0>
           │       └ <function run at 0x0000000002FA2C00>
           └ <module 'asyncio' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000000005A506A0>
           │      └ <function Runner.run at 0x0000000002FA2FC0>
           └ <asyncio.runners.Runner object at 0x000000000381E410>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py:81> ...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000000002FA0AE0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000000000381E410>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000000000307C9A0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000000002FA2840>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000000002EE7EC0>
    └ <Handle <TaskStepMethWrapper object at 0x000000000096CAF0>()>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000000000096CAF0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000000000096CAF0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000000000096CAF0>()>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 428, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A54950>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D475D0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A54950>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D475D0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D475D0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000005D0CD50>
          └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000000005D09300>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000005D0C8D0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000005D0CD50>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005D0C810>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000005D0C8D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000000004D6E810>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005D0C810>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000000003C445E0>
          └ APIRoute(path='/refresh', name='login', methods=['GET'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000000005A49E40>
          └ APIRoute(path='/refresh', name='login', methods=['GET'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000000005D47F10>
                     └ <function get_request_handler.<locals>.app at 0x0000000005A49DA0>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000000003C26980>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidH...
                 │         └ <function login at 0x0000000004D73240>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000000005A4D550>

  File "d:\code\diploms\api\views\main.py", line 56, in login
    access_token = generate_ac_token(refresh_token)
                   │                 └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2gi...
                   └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D71F80>

  File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2g...
           └ <function generate_ac_token at 0x0000000004D71620>

  File "d:\code\diploms\api\models\token.py", line 16, in generate_ac_token
    data = decode_token(token)
           │            └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2gi...
           └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D1DF80>

> File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2g...
           └ <function decode_token at 0x0000000004D1DEE0>

  File "d:\code\diploms\api\models\token.py", line 10, in decode_token
    data = jwt.decode(token, SECRET_KEY, algorithms=ALGORITHM)
           │   │      │      │                      └ 'HS256'
           │   │      │      └ '09d25e094faa6ca2556c818166b7a9563b93f7099f6f0f4caa6cf63b88e8d3e7'
           │   │      └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2gi...
           │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x0000000004D6D250>>
           └ <module 'jwt' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\jwt\\__init__.py'>

  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jwt.py", line 210, in decode
    decoded = self.decode_complete(
              │    └ <function PyJWT.decode_complete at 0x0000000004D71940>
              └ <jwt.api_jwt.PyJWT object at 0x0000000004D6D250>
  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jwt.py", line 151, in decode_complete
    decoded = api_jws.decode_complete(
              │       └ <bound method PyJWS.decode_complete of <jwt.api_jws.PyJWS object at 0x0000000004D507D0>>
              └ <module 'jwt.api_jws' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\jwt\\api_jws.py'>
  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jws.py", line 198, in decode_complete
    payload, signing_input, header, signature = self._load(jwt)
                                                │    │     └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2gi...
                                                │    └ <function PyJWS._load at 0x0000000004D70FE0>
                                                └ <jwt.api_jws.PyJWS object at 0x0000000004D507D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\jwt\api_jws.py", line 270, in _load
    raise DecodeError(f"Invalid header string: {e}") from e
          └ <class 'jwt.exceptions.DecodeError'>

jwt.exceptions.DecodeError: Invalid header string: Expecting ',' delimiter: line 1 column 27 (char 26)
2023-05-20 20:28:51.205 | ERROR    | modules.decorators:wrapper:10 - 'type'
Traceback (most recent call last):

  File "d:\code\diploms\api\app.py", line 71, in <module>
    uvicorn.run(app, host=my_host, port=8000)
    │       │   │         └ '127.0.0.1'
    │       │   └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
    │       └ <function run at 0x0000000003632CA0>
    └ <module 'uvicorn' from 'D:\\code\\diploms\\api\\venv\\Lib\\site-packages\\uvicorn\\__init__.py'>

  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\main.py", line 578, in run
    server.run()
    │      └ <function Server.run at 0x0000000003692B60>
    └ <uvicorn.server.Server object at 0x0000000004D6E8D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py", line 61, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0x0000000003692C00>
           │       │   └ <uvicorn.server.Server object at 0x0000000004D6E8D0>
           │       └ <function run at 0x0000000002FA2C00>
           └ <module 'asyncio' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x0000000005A506A0>
           │      └ <function Runner.run at 0x0000000002FA2FC0>
           └ <asyncio.runners.Runner object at 0x000000000381E410>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\code\diploms\api\venv\Lib\site-packages\uvicorn\server.py:81> ...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000000002FA0AE0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000000000381E410>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000000000307C9A0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000000002FA2840>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000000002EE7EC0>
    └ <Handle <TaskStepMethWrapper object at 0x000000000096CAF0>()>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000000000096CAF0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000000000096CAF0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000000000096CAF0>()>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 428, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A54950>
  File "D:\code\diploms\api\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D475D0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000000005A54950>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D475D0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D475D0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000005D0CD50>
          └ <fastapi.applications.FastAPI object at 0x00000000059A1C90>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000000005D09300>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000005D0C8D0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000000005D0CD50>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005D0C810>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000000005D0C8D0>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000000004D6E810>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000000005D0C810>
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000000003C445E0>
          └ APIRoute(path='/refresh', name='login', methods=['GET'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000000005D08B80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x0000000005D47...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000000005A49E40>
          └ APIRoute(path='/refresh', name='login', methods=['GET'])
  File "D:\code\diploms\api\venv\Lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000000005D47F10>
                     └ <function get_request_handler.<locals>.app at 0x0000000005A49DA0>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000000003C26980>
  File "D:\code\diploms\api\venv\Lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'refresh_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidH...
                 │         └ <function login at 0x0000000004D73240>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000000005A4D550>

  File "d:\code\diploms\api\views\main.py", line 56, in login
    access_token = generate_ac_token(refresh_token)
                   │                 └ 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2gi...
                   └ <function default_decorator.<locals>.iternal_decorator.<locals>.wrapper at 0x0000000004D71F80>

> File "d:\code\diploms\api\modules\decorators.py", line 8, in wrapper
    return function(*args, **kwargs)
           │         │       └ {}
           │         └ ('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ.eyJpZCI6IjY0NjY1YWQyODdjZWM5MGY1MjYzZTQzMiIsImV4cCI6MTY4OTc5ODQyOCwidHlwZSI6InJlZnJlc2g...
           └ <function generate_ac_token at 0x0000000004D71620>

  File "d:\code\diploms\api\models\token.py", line 18, in generate_ac_token
    if data['type'] == 'refresh' and datetime.fromtimestamp(data['exp']) > datetime.now():
       │                             │        │             │              │        └ <method 'now' of 'datetime.datetime' objects>
       │                             │        │             │              └ <class 'datetime.datetime'>
       │                             │        │             └ {'message': 'error in decoding token'}
       │                             │        └ <method 'fromtimestamp' of 'datetime.datetime' objects>
       │                             └ <class 'datetime.datetime'>
       └ {'message': 'error in decoding token'}

KeyError: 'type'
2023-05-20 21:15:16.620 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-20 21:15:16.622 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:15:16.624 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-20 21:15:16.626 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:16:56.008 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-20 21:16:56.011 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:16:56.014 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-20 21:16:56.017 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:19:54.814 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-20 21:19:54.816 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:19:54.819 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-20 21:19:54.821 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:20:58.433 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-20 21:20:58.437 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:20:58.440 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-20 21:20:58.442 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:23:54.534 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-20 21:23:54.538 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:23:54.541 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-20 21:23:54.543 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:25:51.583 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-20 21:25:51.587 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:25:51.590 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-20 21:25:51.592 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:28:21.471 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-20 21:28:21.476 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:28:21.479 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-20 21:28:21.481 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:29:49.899 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-20 21:29:49.903 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:29:49.907 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-20 21:29:49.909 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:31:33.815 | INFO     | db.db:create_host_list:57 - chrome1
2023-05-20 21:31:33.817 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:31:33.819 | INFO     | db.db:create_host_list:57 - chrome2
2023-05-20 21:31:33.821 | WARNING  | db.db:create_host_list:58 - True
2023-05-20 21:37:51.172 | INFO     | db.db:create_host_list:61 - chrome1
2023-05-20 21:37:51.174 | WARNING  | db.db:create_host_list:62 - True
2023-05-20 21:37:51.176 | INFO     | db.db:create_host_list:61 - chrome2
2023-05-20 21:37:51.179 | WARNING  | db.db:create_host_list:62 - True
2023-05-21 15:30:23.420 | INFO     | db.db:create_host_list:61 - chrome1
2023-05-21 15:30:23.422 | WARNING  | db.db:create_host_list:62 - True
2023-05-21 15:30:23.425 | INFO     | db.db:create_host_list:61 - chrome2
2023-05-21 15:30:23.427 | WARNING  | db.db:create_host_list:62 - True
2023-05-22 00:49:20.809 | INFO     | db.db:create_host_list:61 - chrome1
2023-05-22 00:49:20.812 | WARNING  | db.db:create_host_list:62 - True
2023-05-22 00:49:20.814 | INFO     | db.db:create_host_list:61 - chrome2
2023-05-22 00:49:20.816 | WARNING  | db.db:create_host_list:62 - True
2023-05-22 00:49:22.002 | ERROR    | __main__:starter:56 - [Errno 11001] getaddrinfo failed
Traceback (most recent call last):

  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x00000000010094E0>
    └ <Thread(Thread-1 (starter), started 4440)>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x00000000010091C0>
    └ <Thread(Thread-1 (starter), started 4440)>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-1 (starter), started 4440)>
    │    │        │    └ ()
    │    │        └ <Thread(Thread-1 (starter), started 4440)>
    │    └ <function starter at 0x0000000005A4A160>
    └ <Thread(Thread-1 (starter), started 4440)>

> File "d:\code\diploms\api\app.py", line 43, in starter
    connection = BlockingConnection(
                 └ <class 'pika.adapters.blocking_connection.BlockingConnection'>

  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\blocking_connection.py", line 360, in __init__
    self._impl = self._create_connection(parameters, _impl_class)
    │    │       │    │                  │           └ None
    │    │       │    │                  └ <ConnectionParameters host=rabbitmq port=5672 virtual_host=/ ssl=False>
    │    │       │    └ <function BlockingConnection._create_connection at 0x0000000003EA3880>
    │    │       └ <BlockingConnection impl=None>
    │    └ None
    └ <BlockingConnection impl=None>
  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\blocking_connection.py", line 451, in _create_connection
    raise self._reap_last_connection_workflow_error(error)
          │    │                                    └ AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - gaierror(11001, 'getaddrinfo failed'); first exception - ...
          │    └ <staticmethod(<function BlockingConnection._reap_last_connection_workflow_error at 0x0000000003EA3920>)>
          └ <BlockingConnection impl=None>
  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\utils\selector_ioloop_adapter.py", line 565, in _resolve
    result = socket.getaddrinfo(self._host, self._port, self._family,
             │      │           │    │      │    │      │    └ 0
             │      │           │    │      │    │      └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005D10A50>
             │      │           │    │      │    └ 5672
             │      │           │    │      └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005D10A50>
             │      │           │    └ 'rabbitmq'
             │      │           └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005D10A50>
             │      └ <function getaddrinfo at 0x000000000136AFC0>
             └ <module 'socket' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\socket.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 962, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               │       │           │     │     │       │     │      └ 0
               │       │           │     │     │       │     └ 6
               │       │           │     │     │       └ <SocketKind.SOCK_STREAM: 1>
               │       │           │     │     └ 0
               │       │           │     └ 5672
               │       │           └ 'rabbitmq'
               │       └ <built-in function getaddrinfo>
               └ <module '_socket' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\DLLs\\_socket.pyd'>

socket.gaierror: [Errno 11001] getaddrinfo failed
2023-05-22 00:49:28.079 | ERROR    | __main__:starter:56 - [Errno 11001] getaddrinfo failed
Traceback (most recent call last):

  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x00000000010094E0>
    └ <Thread(Thread-1 (starter), started 4440)>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x00000000010091C0>
    └ <Thread(Thread-1 (starter), started 4440)>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-1 (starter), started 4440)>
    │    │        │    └ ()
    │    │        └ <Thread(Thread-1 (starter), started 4440)>
    │    └ <function starter at 0x0000000005A4A160>
    └ <Thread(Thread-1 (starter), started 4440)>

> File "d:\code\diploms\api\app.py", line 43, in starter
    connection = BlockingConnection(
                 └ <class 'pika.adapters.blocking_connection.BlockingConnection'>

  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\blocking_connection.py", line 360, in __init__
    self._impl = self._create_connection(parameters, _impl_class)
    │    │       │    │                  │           └ None
    │    │       │    │                  └ <ConnectionParameters host=rabbitmq port=5672 virtual_host=/ ssl=False>
    │    │       │    └ <function BlockingConnection._create_connection at 0x0000000003EA3880>
    │    │       └ <BlockingConnection impl=None>
    │    └ None
    └ <BlockingConnection impl=None>
  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\blocking_connection.py", line 451, in _create_connection
    raise self._reap_last_connection_workflow_error(error)
          │    │                                    └ AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - gaierror(11001, 'getaddrinfo failed'); first exception - ...
          │    └ <staticmethod(<function BlockingConnection._reap_last_connection_workflow_error at 0x0000000003EA3920>)>
          └ <BlockingConnection impl=None>
  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\utils\selector_ioloop_adapter.py", line 565, in _resolve
    result = socket.getaddrinfo(self._host, self._port, self._family,
             │      │           │    │      │    │      │    └ 0
             │      │           │    │      │    │      └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005DAE090>
             │      │           │    │      │    └ 5672
             │      │           │    │      └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005DAE090>
             │      │           │    └ 'rabbitmq'
             │      │           └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005DAE090>
             │      └ <function getaddrinfo at 0x000000000136AFC0>
             └ <module 'socket' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\socket.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 962, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               │       │           │     │     │       │     │      └ 0
               │       │           │     │     │       │     └ 6
               │       │           │     │     │       └ <SocketKind.SOCK_STREAM: 1>
               │       │           │     │     └ 0
               │       │           │     └ 5672
               │       │           └ 'rabbitmq'
               │       └ <built-in function getaddrinfo>
               └ <module '_socket' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\DLLs\\_socket.pyd'>

socket.gaierror: [Errno 11001] getaddrinfo failed
2023-05-22 00:49:31.020 | WARNING  | modules.proxy_checker:proxy_daemon:43 - 111.123.235.138
2023-05-22 00:49:31.033 | WARNING  | modules.proxy_checker:proxy_daemon:43 - 185.231.244.143
2023-05-22 00:49:31.049 | WARNING  | modules.proxy_checker:proxy_daemon:43 - 185.231.244.178
2023-05-22 00:49:31.068 | WARNING  | modules.proxy_checker:proxy_daemon:43 - 185.231.244.146
2023-05-22 00:49:31.104 | WARNING  | modules.proxy_checker:proxy_daemon:43 - 185.231.244.160
2023-05-22 00:49:31.132 | WARNING  | modules.proxy_checker:proxy_daemon:43 - 185.231.244.141
2023-05-22 00:49:31.146 | WARNING  | modules.proxy_checker:proxy_daemon:43 - 185.231.244.181
2023-05-22 00:49:31.179 | WARNING  | modules.proxy_checker:proxy_daemon:43 - 185.231.244.142
2023-05-22 00:49:31.192 | WARNING  | modules.proxy_checker:proxy_daemon:43 - 185.231.244.222
2023-05-22 00:49:31.227 | WARNING  | modules.proxy_checker:proxy_daemon:43 - 185.231.244.132
2023-05-22 00:49:31.259 | WARNING  | modules.proxy_checker:proxy_daemon:43 - 185.231.244.69
2023-05-22 00:49:34.111 | ERROR    | __main__:starter:56 - [Errno 11001] getaddrinfo failed
Traceback (most recent call last):

  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x00000000010094E0>
    └ <Thread(Thread-1 (starter), started 4440)>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x00000000010091C0>
    └ <Thread(Thread-1 (starter), started 4440)>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-1 (starter), started 4440)>
    │    │        │    └ ()
    │    │        └ <Thread(Thread-1 (starter), started 4440)>
    │    └ <function starter at 0x0000000005A4A160>
    └ <Thread(Thread-1 (starter), started 4440)>

> File "d:\code\diploms\api\app.py", line 43, in starter
    connection = BlockingConnection(
                 └ <class 'pika.adapters.blocking_connection.BlockingConnection'>

  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\blocking_connection.py", line 360, in __init__
    self._impl = self._create_connection(parameters, _impl_class)
    │    │       │    │                  │           └ None
    │    │       │    │                  └ <ConnectionParameters host=rabbitmq port=5672 virtual_host=/ ssl=False>
    │    │       │    └ <function BlockingConnection._create_connection at 0x0000000003EA3880>
    │    │       └ <BlockingConnection impl=None>
    │    └ None
    └ <BlockingConnection impl=None>
  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\blocking_connection.py", line 451, in _create_connection
    raise self._reap_last_connection_workflow_error(error)
          │    │                                    └ AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - gaierror(11001, 'getaddrinfo failed'); first exception - ...
          │    └ <staticmethod(<function BlockingConnection._reap_last_connection_workflow_error at 0x0000000003EA3920>)>
          └ <BlockingConnection impl=None>
  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\utils\selector_ioloop_adapter.py", line 565, in _resolve
    result = socket.getaddrinfo(self._host, self._port, self._family,
             │      │           │    │      │    │      │    └ 0
             │      │           │    │      │    │      └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005CE3B50>
             │      │           │    │      │    └ 5672
             │      │           │    │      └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005CE3B50>
             │      │           │    └ 'rabbitmq'
             │      │           └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005CE3B50>
             │      └ <function getaddrinfo at 0x000000000136AFC0>
             └ <module 'socket' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\socket.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 962, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               │       │           │     │     │       │     │      └ 0
               │       │           │     │     │       │     └ 6
               │       │           │     │     │       └ <SocketKind.SOCK_STREAM: 1>
               │       │           │     │     └ 0
               │       │           │     └ 5672
               │       │           └ 'rabbitmq'
               │       └ <built-in function getaddrinfo>
               └ <module '_socket' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\DLLs\\_socket.pyd'>

socket.gaierror: [Errno 11001] getaddrinfo failed
2023-05-22 00:49:40.146 | ERROR    | __main__:starter:56 - [Errno 11001] getaddrinfo failed
Traceback (most recent call last):

  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x00000000010094E0>
    └ <Thread(Thread-1 (starter), started 4440)>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x00000000010091C0>
    └ <Thread(Thread-1 (starter), started 4440)>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-1 (starter), started 4440)>
    │    │        │    └ ()
    │    │        └ <Thread(Thread-1 (starter), started 4440)>
    │    └ <function starter at 0x0000000005A4A160>
    └ <Thread(Thread-1 (starter), started 4440)>

> File "d:\code\diploms\api\app.py", line 43, in starter
    connection = BlockingConnection(
                 └ <class 'pika.adapters.blocking_connection.BlockingConnection'>

  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\blocking_connection.py", line 360, in __init__
    self._impl = self._create_connection(parameters, _impl_class)
    │    │       │    │                  │           └ None
    │    │       │    │                  └ <ConnectionParameters host=rabbitmq port=5672 virtual_host=/ ssl=False>
    │    │       │    └ <function BlockingConnection._create_connection at 0x0000000003EA3880>
    │    │       └ <BlockingConnection impl=None>
    │    └ None
    └ <BlockingConnection impl=None>
  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\blocking_connection.py", line 451, in _create_connection
    raise self._reap_last_connection_workflow_error(error)
          │    │                                    └ AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - gaierror(11001, 'getaddrinfo failed'); first exception - ...
          │    └ <staticmethod(<function BlockingConnection._reap_last_connection_workflow_error at 0x0000000003EA3920>)>
          └ <BlockingConnection impl=None>
  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\utils\selector_ioloop_adapter.py", line 565, in _resolve
    result = socket.getaddrinfo(self._host, self._port, self._family,
             │      │           │    │      │    │      │    └ 0
             │      │           │    │      │    │      └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005D20550>
             │      │           │    │      │    └ 5672
             │      │           │    │      └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005D20550>
             │      │           │    └ 'rabbitmq'
             │      │           └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005D20550>
             │      └ <function getaddrinfo at 0x000000000136AFC0>
             └ <module 'socket' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\socket.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 962, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               │       │           │     │     │       │     │      └ 0
               │       │           │     │     │       │     └ 6
               │       │           │     │     │       └ <SocketKind.SOCK_STREAM: 1>
               │       │           │     │     └ 0
               │       │           │     └ 5672
               │       │           └ 'rabbitmq'
               │       └ <built-in function getaddrinfo>
               └ <module '_socket' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\DLLs\\_socket.pyd'>

socket.gaierror: [Errno 11001] getaddrinfo failed
2023-05-22 00:49:46.186 | ERROR    | __main__:starter:56 - [Errno 11001] getaddrinfo failed
Traceback (most recent call last):

  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x00000000010094E0>
    └ <Thread(Thread-1 (starter), started 4440)>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x00000000010091C0>
    └ <Thread(Thread-1 (starter), started 4440)>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-1 (starter), started 4440)>
    │    │        │    └ ()
    │    │        └ <Thread(Thread-1 (starter), started 4440)>
    │    └ <function starter at 0x0000000005A4A160>
    └ <Thread(Thread-1 (starter), started 4440)>

> File "d:\code\diploms\api\app.py", line 43, in starter
    connection = BlockingConnection(
                 └ <class 'pika.adapters.blocking_connection.BlockingConnection'>

  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\blocking_connection.py", line 360, in __init__
    self._impl = self._create_connection(parameters, _impl_class)
    │    │       │    │                  │           └ None
    │    │       │    │                  └ <ConnectionParameters host=rabbitmq port=5672 virtual_host=/ ssl=False>
    │    │       │    └ <function BlockingConnection._create_connection at 0x0000000003EA3880>
    │    │       └ <BlockingConnection impl=None>
    │    └ None
    └ <BlockingConnection impl=None>
  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\blocking_connection.py", line 451, in _create_connection
    raise self._reap_last_connection_workflow_error(error)
          │    │                                    └ AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - gaierror(11001, 'getaddrinfo failed'); first exception - ...
          │    └ <staticmethod(<function BlockingConnection._reap_last_connection_workflow_error at 0x0000000003EA3920>)>
          └ <BlockingConnection impl=None>
  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\utils\selector_ioloop_adapter.py", line 565, in _resolve
    result = socket.getaddrinfo(self._host, self._port, self._family,
             │      │           │    │      │    │      │    └ 0
             │      │           │    │      │    │      └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005DAD150>
             │      │           │    │      │    └ 5672
             │      │           │    │      └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005DAD150>
             │      │           │    └ 'rabbitmq'
             │      │           └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005DAD150>
             │      └ <function getaddrinfo at 0x000000000136AFC0>
             └ <module 'socket' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\socket.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 962, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               │       │           │     │     │       │     │      └ 0
               │       │           │     │     │       │     └ 6
               │       │           │     │     │       └ <SocketKind.SOCK_STREAM: 1>
               │       │           │     │     └ 0
               │       │           │     └ 5672
               │       │           └ 'rabbitmq'
               │       └ <built-in function getaddrinfo>
               └ <module '_socket' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\DLLs\\_socket.pyd'>

socket.gaierror: [Errno 11001] getaddrinfo failed
2023-05-22 00:49:52.222 | ERROR    | __main__:starter:56 - [Errno 11001] getaddrinfo failed
Traceback (most recent call last):

  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x00000000010094E0>
    └ <Thread(Thread-1 (starter), started 4440)>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x00000000010091C0>
    └ <Thread(Thread-1 (starter), started 4440)>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-1 (starter), started 4440)>
    │    │        │    └ ()
    │    │        └ <Thread(Thread-1 (starter), started 4440)>
    │    └ <function starter at 0x0000000005A4A160>
    └ <Thread(Thread-1 (starter), started 4440)>

> File "d:\code\diploms\api\app.py", line 43, in starter
    connection = BlockingConnection(
                 └ <class 'pika.adapters.blocking_connection.BlockingConnection'>

  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\blocking_connection.py", line 360, in __init__
    self._impl = self._create_connection(parameters, _impl_class)
    │    │       │    │                  │           └ None
    │    │       │    │                  └ <ConnectionParameters host=rabbitmq port=5672 virtual_host=/ ssl=False>
    │    │       │    └ <function BlockingConnection._create_connection at 0x0000000003EA3880>
    │    │       └ <BlockingConnection impl=None>
    │    └ None
    └ <BlockingConnection impl=None>
  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\blocking_connection.py", line 451, in _create_connection
    raise self._reap_last_connection_workflow_error(error)
          │    │                                    └ AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - gaierror(11001, 'getaddrinfo failed'); first exception - ...
          │    └ <staticmethod(<function BlockingConnection._reap_last_connection_workflow_error at 0x0000000003EA3920>)>
          └ <BlockingConnection impl=None>
  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\utils\selector_ioloop_adapter.py", line 565, in _resolve
    result = socket.getaddrinfo(self._host, self._port, self._family,
             │      │           │    │      │    │      │    └ 0
             │      │           │    │      │    │      └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005D11550>
             │      │           │    │      │    └ 5672
             │      │           │    │      └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005D11550>
             │      │           │    └ 'rabbitmq'
             │      │           └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005D11550>
             │      └ <function getaddrinfo at 0x000000000136AFC0>
             └ <module 'socket' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\socket.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 962, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               │       │           │     │     │       │     │      └ 0
               │       │           │     │     │       │     └ 6
               │       │           │     │     │       └ <SocketKind.SOCK_STREAM: 1>
               │       │           │     │     └ 0
               │       │           │     └ 5672
               │       │           └ 'rabbitmq'
               │       └ <built-in function getaddrinfo>
               └ <module '_socket' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\DLLs\\_socket.pyd'>

socket.gaierror: [Errno 11001] getaddrinfo failed
2023-05-22 00:49:58.262 | ERROR    | __main__:starter:56 - [Errno 11001] getaddrinfo failed
Traceback (most recent call last):

  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 995, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x00000000010094E0>
    └ <Thread(Thread-1 (starter), started 4440)>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 1038, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x00000000010091C0>
    └ <Thread(Thread-1 (starter), started 4440)>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\threading.py", line 975, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-1 (starter), started 4440)>
    │    │        │    └ ()
    │    │        └ <Thread(Thread-1 (starter), started 4440)>
    │    └ <function starter at 0x0000000005A4A160>
    └ <Thread(Thread-1 (starter), started 4440)>

> File "d:\code\diploms\api\app.py", line 43, in starter
    connection = BlockingConnection(
                 └ <class 'pika.adapters.blocking_connection.BlockingConnection'>

  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\blocking_connection.py", line 360, in __init__
    self._impl = self._create_connection(parameters, _impl_class)
    │    │       │    │                  │           └ None
    │    │       │    │                  └ <ConnectionParameters host=rabbitmq port=5672 virtual_host=/ ssl=False>
    │    │       │    └ <function BlockingConnection._create_connection at 0x0000000003EA3880>
    │    │       └ <BlockingConnection impl=None>
    │    └ None
    └ <BlockingConnection impl=None>
  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\blocking_connection.py", line 451, in _create_connection
    raise self._reap_last_connection_workflow_error(error)
          │    │                                    └ AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - gaierror(11001, 'getaddrinfo failed'); first exception - ...
          │    └ <staticmethod(<function BlockingConnection._reap_last_connection_workflow_error at 0x0000000003EA3920>)>
          └ <BlockingConnection impl=None>
  File "D:\code\diploms\api\venv\Lib\site-packages\pika\adapters\utils\selector_ioloop_adapter.py", line 565, in _resolve
    result = socket.getaddrinfo(self._host, self._port, self._family,
             │      │           │    │      │    │      │    └ 0
             │      │           │    │      │    │      └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005D11DD0>
             │      │           │    │      │    └ 5672
             │      │           │    │      └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005D11DD0>
             │      │           │    └ 'rabbitmq'
             │      │           └ <pika.adapters.utils.selector_ioloop_adapter._AddressResolver object at 0x0000000005D11DD0>
             │      └ <function getaddrinfo at 0x000000000136AFC0>
             └ <module 'socket' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\socket.py'>
  File "C:\Users\Gray\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 962, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               │       │           │     │     │       │     │      └ 0
               │       │           │     │     │       │     └ 6
               │       │           │     │     │       └ <SocketKind.SOCK_STREAM: 1>
               │       │           │     │     └ 0
               │       │           │     └ 5672
               │       │           └ 'rabbitmq'
               │       └ <built-in function getaddrinfo>
               └ <module '_socket' from 'C:\\Users\\Gray\\AppData\\Local\\Programs\\Python\\Python311\\DLLs\\_socket.pyd'>

socket.gaierror: [Errno 11001] getaddrinfo failed
2023-05-22 00:50:07.925 | INFO     | db.db:create_host_list:61 - chrome1
2023-05-22 00:50:07.927 | WARNING  | db.db:create_host_list:62 - True
2023-05-22 00:50:07.929 | INFO     | db.db:create_host_list:61 - chrome2
2023-05-22 00:50:07.931 | WARNING  | db.db:create_host_list:62 - True
2023-05-22 01:45:23.587 | INFO     | db.db:create_host_list:61 - chrome1
2023-05-22 01:45:23.590 | WARNING  | db.db:create_host_list:62 - True
2023-05-22 01:45:23.592 | INFO     | db.db:create_host_list:61 - chrome2
2023-05-22 01:45:23.594 | WARNING  | db.db:create_host_list:62 - True
2023-05-22 02:51:39.570 | INFO     | db.db:create_host_list:61 - chrome1
2023-05-22 02:51:39.572 | WARNING  | db.db:create_host_list:62 - True
2023-05-22 02:51:39.574 | INFO     | db.db:create_host_list:61 - chrome2
2023-05-22 02:51:39.576 | WARNING  | db.db:create_host_list:62 - True
2023-05-22 03:30:09.833 | INFO     | db.db:create_host_list:61 - chrome1
2023-05-22 03:30:09.835 | WARNING  | db.db:create_host_list:62 - True
2023-05-22 03:30:09.836 | INFO     | db.db:create_host_list:61 - chrome2
2023-05-22 03:30:09.838 | WARNING  | db.db:create_host_list:62 - True
